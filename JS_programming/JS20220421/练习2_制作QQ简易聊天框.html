<!DOCTYPE html>
<html>
	<head lang="en">
		<meta charset="UTF-8">
		<title>QQ简易聊天框</title>
		<link rel="stylesheet" href="css/chat.css">
	</head>
	<body>
		<section id="chat">
			<div class="chatBody"></div>
			<div><img src="img/icon.jpg"></div>
			<textarea class="chatText"></textarea>
			<div class="btn"><span>关闭(C)</span><span id="send">发送(S)</span></div>
		</section>
		<script src="js/jquery-1.12.4.js"></script>
		<script>
			$(document).ready(function() {
				// Math.random() 生成 [0,1) 的数，所以 Math.random()*5 生成 [0,5) 的数
				// 通常期望得到整数，所以要对得到的结果处理一下
				// Math.floor()
				let uName = new Array("时尚伊人", "六月奇迹", "松松");
				let uImg = new Array("head01.jpg", "head02.jpg", "head03.jpg");
				let message = "";
				$("#send").click(function() {
					let content = $(".chatText").val();
					if (content == "") {
						alert("不能发送空内容！");
					} else {
						// 随机头像和昵称
						let index = Math.floor(Math.random() * 3); // 产生0到3的随机数
						let touxiang = "<div><img src='img/" + uImg[index] + "' /></div>";
						let nicheng = "<p>" + uName[index] + "</p>";
						let neirong = "<div>" + content + "</div>";
						let curentStr = "<section>" + touxiang + nicheng + neirong + "</section>";
						message = message + curentStr;
						$(".chatBody").html(message);
						// 加样式
						$(".chatBody section div:last").addClass("chatContent");
					}
					$(".chatText").val("");
				});
			});
		</script>
	</body>
</html>
